<html>
<head>
  <title>Web Sockets</title>

  <script src="http://www.google.com/jsapi"></script>
  <script>
    google.load('jquery','1.3.2');
  </script>

  <script>
    $(document).ready(function() {
    
    if ("WebSocket" in window) {
        var ws = new WebSocket("ws://localhost:9876/");
        ws.onopen = function() { 
          $('#connectionStatus').text('Connection opened');
          
          var strokes = [[{x:0,y:0},{x:1,y:0}]];
          var otherstrokes = [[{x:0,y:0},{x:0,y:1}]];
          ws.send(JSON.stringify({train:strokes, id:'foo'}));
          ws.send(JSON.stringify({train:otherstrokes, id:'bar'}));
          ws.send(JSON.stringify({classify:strokes}));
          ws.send(JSON.stringify({train:"Illegal strokes", id:'foo'}));
          ws.send(JSON.stringify({train:"Illegal strokes", id: {illegal:'id'}}));
          ws.send(JSON.stringify({classify:"Illegal strokes"}));
          ws.send("Illegal");
        };

        ws.onmessage = function(evt) {
          $('#output').append('<p>' + evt.data + '</p>');
        };

        ws.onclose = function() {
           $('#connectionStatus').text('Connection closed');
        };

      } else {
        $('#connectionStatus').append('<p>Your browser does not support web sockets</p>');
      }
    });
  </script>

</head>
<body>
  <h1>Websockets example</h1>

  <div id="output">
  </div>

  <div id="connectionStatus">
  </div>

</body>